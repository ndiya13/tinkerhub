{% extends "base.html" %}

{% block title %}Profile - {{ user.username }}{% endblock %}

{% block content %}
<div class="container">
    <div class="profile-container">
        <div class="profile-sidebar">
            <div class="profile-header">
                <div class="profile-avatar">
                    <img src="{{ url_for('static', filename='images/default-avatar.png') }}" alt="Profile Picture">
                </div>
                <h1>{{ user.username }}</h1>
                <p class="profile-status {% if user.is_volunteer %}volunteer{% endif %}">
                    {% if user.is_volunteer %}
                        <i class="fas fa-star"></i> Volunteer
                    {% else %}
                        <i class="fas fa-user"></i> Member
                    {% endif %}
                </p>
            </div>

            <div class="profile-info">
                <div class="info-item">
                    <i class="fas fa-envelope"></i>
                    <span>{{ user.email }}</span>
                </div>
                <div class="info-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>{{ user.location or 'Location not set' }}</span>
                </div>
            </div>

            <div class="profile-actions">
                <button class="btn btn-primary" onclick="toggleEditMode()">
                    <i class="fas fa-edit"></i> Edit Profile
                </button>
            </div>
        </div>

        <div class="profile-main">
            <div class="profile-section">
                <h2><i class="fas fa-tools"></i> Skills</h2>
                <div class="skills-container">
                    {% if user.skills %}
                        {% for skill in user.skills.split(',') %}
                            <span class="skill-tag">{{ skill.strip() }}</span>
                        {% endfor %}
                    {% else %}
                        <p class="no-content">No skills listed yet</p>
                    {% endif %}
                </div>
            </div>

            <div class="profile-section">
                <h2><i class="fas fa-history"></i> Experience</h2>
                <div class="experience-content">
                    {{ user.experience or 'No experience listed yet' }}
                </div>
            </div>

            <div class="profile-section">
                <h2><i class="fas fa-clipboard-list"></i> Request History</h2>
                <div class="requests-container">
                    {% if requests %}
                        {% for request in requests %}
                            <div class="request-card">
                                <div class="request-header">
                                    <h3>{{ request.resource_type }}</h3>
                                    <span class="status-badge status-{{ request.status }}">
                                        {{ request.status }}
                                    </span>
                                </div>
                                <p class="request-description">{{ request.description }}</p>
                                <div class="request-footer">
                                    <span class="request-date">
                                        <i class="fas fa-calendar"></i>
                                        {{ request.created_at.strftime('%B %d, %Y') }}
                                    </span>
                                    <span class="request-location">
                                        <i class="fas fa-map-marker-alt"></i>
                                        {{ request.location }}
                                    </span>
                                </div>
                            </div>
                        {% endfor %}
                    {% else %}
                        <p class="no-content">No requests made yet</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}